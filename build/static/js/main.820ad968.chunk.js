(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{44:function(e){e.exports=JSON.parse('{"web":{"client_id":"773905563523-mppmmb751o0r3fa36k8far8a7u7irj9o.apps.googleusercontent.com","project_id":"speakit-cs361","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_secret":"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","redirect_uris":["https://speakit-cs361.wl.r.appspot.com/oauth","http://localhost:3000/oauth"],"javascript_origins":["https://speakit-cs361.wl.r.appspot.com","http://localhost:3000"]}}')},53:function(e,t,c){},54:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},70:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(21),a=c.n(s),i=(c(53),c(6)),o=(c(54),c(37)),r=c.n(o),j=c(17),l=c(76),h=c(72),u=c(77),b=c(1),d=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(l.a,{bg:"dark",variant:"dark",children:Object(b.jsxs)(h.a,{children:[Object(b.jsx)(l.a.Brand,{href:"/",children:"Speakit"}),Object(b.jsxs)(u.a,{className:"me-auto",children:[Object(b.jsx)(u.a.Link,{as:j.b,to:"/",children:"Home"}),Object(b.jsx)(u.a.Link,{as:j.b,to:"/categories",children:"Categories"})]})]})})})},p=c(79),O=c(73),x=c(48),f=c(74),m=c(75),g=(c(64),{width:100,padding:10}),v=function(e){var t=Object(n.useState)(null),c=Object(i.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(!1),r=Object(i.a)(o,2),j=r[0],l=r[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),v=d[0],k=d[1],w=e.self;Object(n.useEffect)((function(){fetch(w).then((function(e){return e.json()})).then((function(e){l(!0),console.log(e),k(e)}),(function(e){l(!0),a(e)}))}),[]);return s?Object(b.jsxs)("div",{children:["Error: ",s.message]}):j?Object(b.jsx)("div",{children:Object(b.jsx)(h.a,{children:Object(b.jsxs)(p.a,{children:[Object(b.jsxs)(p.a.Text,{xs:"1",children:[Object(b.jsxs)(O.a,{children:[Object(b.jsx)(x.a,{md:{span:2},children:Object(b.jsx)(f.a,{style:g,src:v.thumbnail,thumbnail:!0})}),Object(b.jsx)(x.a,{md:{span:2},children:Object(b.jsx)("span",{className:"title",children:v.title})}),Object(b.jsx)(x.a,{md:{span:2,offset:6},children:Object(b.jsx)(m.a,{variant:"danger",onClick:function(){fetch(w,{method:"DELETE"}).then((function(){fetch("https://speakit-cs361.wl.r.appspot.com/categories/"+e.category+"/posts").then((function(t){return t.json().then((function(t){e.setState(t)}),(function(e){}))}))}))},children:"Delete"})})]}),Object(b.jsx)("div",{className:"content",children:v.content})]}),Object(b.jsx)(p.a.Footer,{children:Object(b.jsxs)("div",{children:["Likes ",v.likes,"   Dislikes ",v.dislikes]})})]})})}):Object(b.jsx)("div",{children:"Loading..."})},k=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("h1",{children:"Home"})})},w=(c(65),function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),o=Object(i.a)(a,2),r=o[0],l=o[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),f=d[0],m=d[1];return Object(n.useEffect)((function(){fetch("https://speakit-cs361.wl.r.appspot.com/categories/list").then((function(e){return e.json()})).then((function(e){l(!0),console.log(e.results),m(e.results)}),(function(e){l(!0),s(e)}))}),[]),c?Object(b.jsxs)("div",{children:["Error: ",c.message]}):r?Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Categories"}),Object(b.jsx)(h.a,{children:Object(b.jsx)(O.a,{xs:!0,md:5,children:f.map((function(e){return Object(b.jsx)(x.a,{children:Object(b.jsx)(p.a,{as:j.b,to:"categories/"+e.name.toString(),className:"categories",children:e.name},e.name)})}))})})]}):Object(b.jsx)("div",{children:"Loading..."})}),y=c(10),S=c(78),C=(c(66),{width:100,padding:10,margin:25}),_=function(e){var t=Object(n.useState)([]),c=Object(i.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(""),r=Object(i.a)(o,2),j=r[0],l=r[1],h=Object(n.useState)(null),u=Object(i.a)(h,2),d=(u[0],u[1],function(e){l(e.target.value)}),p=function(){""!=j&&fetch("https://cs361scraper.herokuapp.com/image/"+j).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.links;t=(t=t.replace(/\s+/g,"")).split(","),a(t)})).catch((function(e){console.log(e)}));console.log(j)};return 0==s.length?Object(b.jsxs)("div",{children:[Object(b.jsx)(S.a.Label,{children:"Pick Thumbnail"}),Object(b.jsx)(S.a.Control,{placeholder:"Enter Keyword",id:"keyword",type:"text",onChange:d}),Object(b.jsx)(m.a,{onClick:p,variant:"primary",type:"button",children:"Search Images"})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)(S.a.Label,{children:"Pick Thumbnail"}),Object(b.jsx)(S.a.Control,{id:"keyword",type:"text",onChange:d}),Object(b.jsx)(m.a,{onClick:p,variant:"primary",type:"button",children:"Search Images"}),Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Check,{inline:!0,type:"radio",name:"thumbnail",value:s[0],label:Object(b.jsx)(f.a,{style:C,src:s[0],thumbnail:!0})}),Object(b.jsx)(S.a.Check,{inline:!0,type:"radio",name:"thumbnail",value:s[1],label:Object(b.jsx)(f.a,{style:C,src:s[1],thumbnail:!0})}),Object(b.jsx)(S.a.Check,{inline:!0,type:"radio",name:"thumbnail",value:s[2],label:Object(b.jsx)(f.a,{style:C,src:s[2],thumbnail:!0})}),Object(b.jsx)(S.a.Check,{inline:!0,type:"radio",name:"thumbnail",value:s[3],label:Object(b.jsx)(f.a,{style:C,src:s[3],thumbnail:!0})})]})]})},P=function(e){var t=Object(y.f)().category,c=Object(n.useState)(null),s=Object(i.a)(c,2),a=(s[0],s[1],Object(n.useState)(!1)),o=Object(i.a)(a,2),r=(o[0],o[1],Object(n.useState)(!1)),l=Object(i.a)(r,2),u=l[0],d=l[1],O=Object(n.useState)(!1),x=Object(i.a)(O,2);x[0],x[1];return u?Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Post Created Successfully!"}),Object(b.jsxs)(m.a,{as:j.b,to:"/categories/"+t,children:["Back to ",t]})]}):Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Creating Post for ",t]}),Object(b.jsx)(h.a,{children:Object(b.jsx)(p.a,{className:"CreatePost",children:Object(b.jsxs)(S.a,{onSubmit:function(e){e.preventDefault();var c=new FormData(e.target),n=Object.fromEntries(c.entries());n.category=t,fetch("https://speakit-cs361.wl.r.appspot.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(){d(!0)})).then((function(){fetch("https://speakit-cs361.wl.r.appspot.com/categories/"+t+"/posts").then((function(e){return e.json().then((function(e){}),(function(e){}))}))}))},children:[Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Post Title"}),Object(b.jsx)(S.a.Control,{type:"text",placeholder:"Enter Title",name:"title"})]}),Object(b.jsxs)(S.a.Group,{children:[Object(b.jsx)(S.a.Label,{children:"Post Content"}),Object(b.jsx)(S.a.Control,{as:"textarea",placeholder:"Enter Content",name:"content"})]}),Object(b.jsx)(_,{}),Object(b.jsx)(m.a,{variant:"primary",type:"submit",children:"Create Post"})]})})})]})},L=(c(67),function(){var e=Object(y.f)().category,t=Object(n.useState)(null),c=Object(i.a)(t,2),s=c[0],a=c[1],o=Object(n.useState)(!1),r=Object(i.a)(o,2),l=r[0],u=r[1],d=Object(n.useState)([]),p=Object(i.a)(d,2),O=p[0],f=p[1],g="https://speakit-cs361.wl.r.appspot.com/categories/"+e+"/posts";return Object(n.useEffect)((function(){fetch(g).then((function(e){return e.json()})).then((function(e){u(!0),console.log(e),f(e)}),(function(e){u(!0),a(e)}))}),[]),s?Object(b.jsxs)("div",{children:["Error: ",s.message]}):l?Object(b.jsxs)("div",{children:[Object(b.jsxs)("h1",{children:["Welcome to Speakit ",e,"!"]}),O.map((function(t){return Object(b.jsx)(x.a,{children:Object(b.jsx)(h.a,{children:Object(b.jsx)(v,{id:t.id,self:t.self,setState:f,category:e})},t.id)})})),Object(b.jsx)(x.a,{children:Object(b.jsx)(h.a,{children:Object(b.jsx)(m.a,{as:j.b,to:e+"/create",variant:"primary",type:"submit",children:"Create Post"})})})]}):Object(b.jsx)("div",{children:"Loading..."})}),E=(c(68),function(e){}),T=c(44),N=function(e){var t="https://accounts.google.com/o/oauth2/v2/auth?response_type=code&client_id="+T.web.client_id+"&redirect_uri=https://speakit-cs361.wl.r.appspot.com&scope=https://www.googleapis.com/auth/userinfo.profile";return Object(b.jsx)("div",{children:Object(b.jsx)(m.a,{variant:"primary",value:t,onClick:function(){return e=t,void fetch("https://speakit-cs361.wl.r.appspot.com/oauth",{method:"POST",body:{}}).then((function(e){return e.json()})).then((function(t){window.location.href=e+"&state="+t.state}));var e},children:"Login with Google"})})},B=function(e){var t=Object(n.useState)(!1),c=Object(i.a)(t,2),s=c[0],a=c[1];return s?Object(b.jsx)("div",{children:Object(b.jsx)(E,{setState:a})}):Object(b.jsx)("div",{children:Object(b.jsx)(N,{setState:a})})},F=(c(69),c(44)),D=function(){var e=Object(n.useState)("checking"),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),o=Object(i.a)(a,2),j=(o[0],o[1],r.a.parse(window.location.search,{ignoreQueryPrefix:!0}).code),l=r.a.parse(window.location.search,{ignoreQueryPrefix:!0}).state;return console.log(j),console.log(l),null!=j&null!=l&"checking"===c&&fetch("https://speakit-cs361.wl.r.appspot.com/oauth/"+l.toString()).then((function(e){return e.json()})).then((function(e){if(e.exists){var t={code:j.toString(),client_id:F.web.client_id,client_secret:F.web.client_secret,redirect_uri:"https://speakit-cs361.wl.r.appspot.com",grant_type:"authorization_code"};fetch("https://www.googleapis.com/oauth2/v4/token",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log("data",e);var t=e.access_token,c=e.id_token;fetch("https://people.googleapis.com/v1/people/me?personFields=names",{headers:{Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(e){var t=e;console.log("profile",t),console.log("jwt",c),fetch("https://speakit-cs361.wl.r.appspot.com/users",{method:"POST",headers:{Authorization:"Bearer "+c}}).then((function(e){return e.json()})).then((function(e){console.log("user",e),t.names[0].jwt=c,t.names[0].user=e.id,s(t.names[0])}))}))}))}else s("error")})),Object(b.jsxs)("div",{children:[Object(b.jsx)(d,{}),Object(b.jsxs)(O.a,{className:"show-grid",children:[Object(b.jsx)(x.a,{xs:2,md:4,children:Object(b.jsx)(B,{})}),Object(b.jsx)(x.a,{xs:10,md:8,children:Object(b.jsxs)(y.c,{children:[Object(b.jsx)(y.a,{path:"/categories/:category/create",children:Object(b.jsx)(P,{})}),Object(b.jsx)(y.a,{path:"/categories/:category",children:Object(b.jsx)(L,{})}),Object(b.jsx)(y.a,{path:"/categories",children:Object(b.jsx)(w,{})}),Object(b.jsx)(y.a,{path:"/",children:Object(b.jsx)(k,{})})]})})]})]})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,80)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),a(e),i(e)}))};a.a.render(Object(b.jsx)(j.a,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),J()}},[[70,1,2]]]);
//# sourceMappingURL=main.820ad968.chunk.js.map